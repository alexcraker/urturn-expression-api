function FastClick(e){"use strict";var t,i=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.layer=e,!e||!e.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){FastClick.prototype.onClick.apply(i,arguments)},this.onTouchStart=function(){FastClick.prototype.onTouchStart.apply(i,arguments)},this.onTouchMove=function(){FastClick.prototype.onTouchMove.apply(i,arguments)},this.onTouchEnd=function(){FastClick.prototype.onTouchEnd.apply(i,arguments)},this.onTouchCancel=function(){FastClick.prototype.onTouchCancel.apply(i,arguments)},void 0!==window.ontouchstart&&(e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,i,n){var o=Node.prototype.removeEventListener;"click"===t?o.call(e,t,i.hijacked||i,n):o.call(e,t,i,n)},e.addEventListener=function(t,i,n){var o=Node.prototype.addEventListener;"click"===t?o.call(e,t,i.hijacked||(i.hijacked=function(e){e.propagationStopped||i(e)}),n):o.call(e,t,i,n)}),"function"==typeof e.onclick&&(t=e.onclick,e.addEventListener("click",function(e){t(e)},!1),e.onclick=null))}var UT={},WD=UT;UT.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=0|16*Math.random(),i="x"==e?t:8|3&t;return i.toString(16)})},UT.UUID=UT.uuid,UT.Collection=function(e){this.length=0,this.name=null,this.setUserItem=function(e){if(!n)throw o.authenticate(),Error("ArgumentError","No currentUserId defined");return this.setItem(n,e)},this.getUserItem=function(){return n?this.getItem(n):void 0};var t=function(e,t){if(!e)throw Error("InvalidKey",e);if(-1!=h.indexOf(e))throw Error("ReservedKey",e);var i=g(e,t),n=null;return e&&(n=this.getItem(e)),f(n,i),!n||null!==i&&void 0!==i?!n&&i?(d++,c.push(e),s[e]=i):s[e]=i:(c.splice(c.indexOf(e),1),d--,delete s[e]),t&&(t._key=e),-1==l.indexOf(e)&&l.push(e),this.length=c.length,t};this.setItem=t;var i=function(e,t){if(!e)return null;var i=s[e];return void 0===i?-1===u.indexOf(e)&&void 0!==this[e]?this[e]:t:"literal"==i._type?i.value:i};this.getItem=i,this.key=function(e){return e>=c.length?null:c[e]},this.average=function(e){return a[e]?a[e].average:void 0},this.sum=function(e){return a[e]?a[e].sum:void 0},this.count=function(e){if(!e)return d;if(a[e])return a[e]?a[e].count:void 0},this.toString=function(){return'<Collection @name="'+this.name+'">'},this.save=function(){x.apply(this);var e={};if(l.length>0){for(var t=0;l.length>t;t++)e[l[t]]=s[l[t]];o.save(this.name,e),l=[]}},this.getCurrentData=function(){var e={name:this.name,count:d,definition:r.definition,operations:[],items:[]};if(r.operations)for(var t=0;r.operations.length>t;t++){var i={operation:r.operations[t].operation,field:r.operations[t].field};p[i.operation].toJsonData(a[i.field],i),e.operations.push(i)}for(var n in s){var o=s[n];o._key=n,e.items.push(o)}return e},this.refresh=function(e){m.call(this,{currentUserId:n,delegate:o,data:e})};var n,o,r,s,a,c,l,u,d,h=["refresh","setItem","getItem","count","sum","key","getUserItem","setUserItem","average","toString","size","length","length","name","save","fieldDefs","sanitizedItem","getCurrentData"],p={_transfer:function(e,t){for(var i=Array.prototype.slice.call(arguments,2),n=i.length-1;n>=0;n--)t[i[n]]=e[i[n]]},average:{fromJsonData:function(e,t){void 0===t.average||void 0===t.average_count?(e.average=-1,e.average_count=0):p._transfer(t,e,"average","average_count")},toJsonData:function(e,t){p._transfer(e,t,"average","average_count")},recompute:function(e,t,i,n){var o=e.average_count;i&&void 0!==i[t.field]&&(e.average=(e.average*o-i[t.field])/parseFloat(o-1),o--),n&&void 0!==n[t.field]&&(e.average=(e.average*o+n[t.field])/parseFloat(o+1),o++),e.average_count=o}},count:{fromJsonData:function(e,t){void 0===t.count?e.count=0:p._transfer(t,e,"count")},toJsonData:function(e,t){p._transfer(e,t,"count")},recompute:function(e,t,i,n){i&&i[t.field]&&void 0!==i[t.field]&&(e.count=e.count-1),n&&n[t.field]&&void 0!==n[t.field]&&e.count++}},sum:{fromJsonData:function(e,t){void 0===t.sum?e.sum=0:p._transfer(t,e,"sum")},toJsonData:function(e,t){p._transfer(e,t,"sum")},recompute:function(e,t,i,n){i&&i[t.field]&&void 0!==i[t.field]&&(e.sum=e.sum-i[t.field]),n&&n[t.field]&&void 0!==n[t.field]&&(e.sum=e.sum+n[t.field])}}},f=function(e,t){if(r.operations)for(var i=0;r.operations.length>i;i++){var n=r.operations[i];(t&&void 0!==t[n.field]||e&&void 0!==e[n.field])&&p[n.operation].recompute(a[n.field],n,e,t)}},g=function(e,t){if(("object"!=typeof t||Array.isArray&&Array.isArray(t))&&(t={_type:"literal",value:t}),!t)return null;sanitizedItem={_key:e};var i;if(r.definition&&(i=r.definition.fields)&&i.length>0)for(var n=0;i.length>n;n++){var o=i[n];if(t[o.name]!==void 0)if("string"==o.type)sanitizedItem[o.name]=t[o.name];else if("number"==o.type){var s=parseFloat(t[o.name]);if(isNaN(s)||!isFinite(t[o.name]))throw Error("TypeError","Wrong value for field note");sanitizedItem[o.name]=s}else{if("boolean"!=o.type)throw Error("TypeError","Unkown type "+o.type);sanitizedItem[o.name]=!!t[o.name]}}else sanitizedItem=t,sanitizedItem._key=e;return sanitizedItem},m=function(e){if(!e.data)throw Error("ArgumentError","missing data");if(!e.data.name)throw Error("ArgumentError","no name in data");if(void 0===e.data.count)throw Error("ArgumentError","no count in data");if(a={},c=[],l=[],u=[],n=e.currentUserId,o=e.delegate,r=e.data,this.name=r.name,d=r.count,r.operations)for(var t=0;r.operations.length>t;t++){var i=r.operations[t];a[i.field]=a[i.field]||{},p[i.operation].fromJsonData(a[i.field],i)}v.call(this,r.items)},v=function(e){if(s={},e){for(var t=0;e.length>t;t++){var i=e[t],n=i._key;s[n]=i,y.call(this,n,i),c.push(n)}this.length=c.length}},y=function(e){-1==u.indexOf(e)&&-1==h.indexOf(e)&&(u.push(e),this.__defineGetter__(e,function(){return i.call(this,e)}),this.__defineSetter__(e,function(i){return t.call(this,e,i)}))},x=function(){for(var e=Object.keys(this),i=e.length-1;i>=0;i--){var n=e[i];-1==h.indexOf(n)&&-1==u.indexOf(n)&&(t.call(this,n,this[n]),y.call(this,n,this[n]))}};m.call(this,e)};var supportGetSet=function(){try{!Object.prototype.__defineGetter__&&Object.defineProperty({},"x",{get:function(){return!0}}).x&&(Object.defineProperty(Object.prototype,"__defineGetter__",{enumerable:!1,configurable:!0,value:function(e,t){Object.defineProperty(this,e,{get:t,enumerable:!0,configurable:!0})}}),Object.defineProperty(Object.prototype,"__defineSetter__",{enumerable:!1,configurable:!0,value:function(e,t){Object.defineProperty(this,e,{set:t,enumerable:!0,configurable:!0})}}))}catch(e){throw Error("Simple Storage API not Supported")}};supportGetSet(),UT.CollectionStore=function(e){this.data=e.data;var t=e.delegate;t.store=this;for(var i={},n=0;this.data.length>n;n++){var o=this.data[n],r=o.name;if(!r)throw Error("ArgumentError","data contains unamed collections.");i[r]=new UT.Collection({data:o,postMessageApi:e.postMessageApi,currentUserId:e.currentUserId,delegate:t})}this.get=function(e){return i[e]},this.set=function(e){i[e.name]=e},this.flush=function(){t.flush()},this.getCurrentData=function(){o=[];for(var e in i)o.push(i[e].getCurrentData());return o},this.refresh=function(e,i){t.refreshCollections(e,i)}},UT.Expression.extendExpression("container",function(e){var t={};return t.autoResize=function(){var t=e.getElement().scrollHeight;UT.Expression._callAPI("container.resizeHeight",[t])},t.resizeHeight=function(e,t){UT.Expression._callAPI("container.resizeHeight",[e],t)},t.setTitle=function(e){UT.Expression._callAPI("container.setTitle",[e])},popupUsers=function(){UT.Expression._callAPI("container.popupUsers",[uerIds])},popup=function(e,t){UT.Expression._callAPI("container.popup",[e,t])},closePopup=function(){UT.Expression._callAPI("container.closePopup")},t}),UT.Expression.extendExpression("medias",function(e){return{imageDialog:function(e,t){console&&console.warn&&console.warn("Usage of imageDialog Deprecated, use expression.dialog instead"),t||(t=e,e={}),e&&e.size&&e.size.auto&&window.console&&console.warn&&console.warn("Use of size.auto is deprecated, use size.autoCrop instead"),UT.Expression._callAPI("medias.openImageChooser",[e],function(e){t.call(this,e)})},createImage:function(t,i){var n=e.readyToPost();e.readyToPost(!1),UT.Expression._callAPI("medias.createImage",[t],function(){e.readyToPost(n),i.apply(e,arguments)})},reCrop:function(e,t,i){e._type&&"image"===e._type||(e={url:e}),UT.Expression._callAPI("medias.reCrop",[{size:t,image:e}],function(e){i.call(this,e)})},crop:function(e,t,i){e._type&&"image"===e._type||(e={url:e}),UT.Expression._callAPI("medias.crop",[{size:t,image:e}],function(e){i.call(this,e)})},applyFilterToImage:function(e,t,i){e._type&&"image"===e._type||(e={url:e}),UT.Expression._callAPI("medias.applyFilter",[{filter:t,image:e}],function(e){i.call(this,e)})},saveImage:function(e,t,i){UT.Expression._callAPI("medias.createImage",[t],function(t){postMessageAPI.apply("items.save",[e,t],function(n,o){return o?(!i&&window.console&&console.error?console.error("Unable to save object with key: "+e,o.message):i&&i.call(o,null,o),void 0):(t._id=n._id,i&&i.call(t,t,null),void 0)})})},imageWithDataUrl:function(e,t){UT.Expression._callAPI("medias.imageWithDataUrl",[e],t)},soundDialog:function(e,t){console&&console.warn&&console.warn("Usage of soundDialog Deprecated, use expression.dialog instead"),UT.Expression._callAPI("medias.openSoundChooser",[e],t)},videoDialog:function(e,t){console&&console.warn&&console.warn("Usage of videoDialog Deprecated, use expression.dialog instead"),UT.Expression._callAPI("medias.openVideoChooser",[e],t)},findImage:function(e,t){UT.Expression._callAPI("medias.findImage",[e],t)}}}),UT.Expression.extendExpression("document",function(e){return{getDocumentURL:function(){return e.getState("documentURL")},getDocumentPrivacy:function(){return e.getState("documentPrivacy")}}}),UT.Expression.extendExpression("url",function(e){var t={};return t["for"]=function(e){return t.getAssetPath(e)},t.getAssetThroughProxy=function(e){return this.proxify(this.getAssetPath(e))},t.getAssetPath=function(t){return 0===t.indexOf("./")&&(t=t.substring(1)),-1===e.getState("assetPath").indexOf("http")?"http://"+e.getState("host")+"/"+e.getState("assetPath")+t:e.getState("assetPath")+t},t.proxify=function(t){var i=window.location.protocol+"//"+e.getState("host")+"/image_proxy/";if("string"==typeof t&&0!==t.indexOf("data:image")&&-1==t.indexOf("image_proxy")){var n=t;if(0===t.indexOf("http://"))n=i+t.substring(7);else if(0===t.indexOf("https://"))n=i+t.substring(8);else{if(0===t.indexOf("./")||0===t.indexOf("/"))return t;n=0===t.indexOf("//")?i+t.substring(2):i+t}return n}return t},t}),function(){var e,t,i=[],n={},o=!1;UT.Expression=function(){throw Error("StaticClass")},UT.Expression.ready=function(t){-1==i.indexOf(t)&&i.push(t),o&&t.call(this,e)};var r=UT.Expression._callAPI=function(e,i,o){var r={type:"ExpAPICall",methodName:e,args:i,expToken:t?t.expToken:null};if(o){var s=""+UT.uuid();n[s]=o,r.callbackId=s}var a=JSON.stringify(r);window.parent.postMessage(a,"*")},s=function(e,t){var i=n[e];i&&(t&&t instanceof Array||window.console&&console.error&&console.error("received result is not an array.",t),i.apply(this,t),delete n[e])},a=function(n){t=n,o=!0,t.readyToPost=!1,e=new UT.Post(t),e.bind("scrollChanged",function(e){t.scrollValues=e});for(var r=0;i.length>r;r++)i[r].apply(e,[e])},c=function(){e.trigger("publish"),r("posted")};UT.Expression._dispatch=function(t){switch(t.type){case"ready":a(t.options);break;case"triggerEvent":e.trigger.apply(e,[t.eventName].concat(t.eventArgs));break;case"callback":s(t.callbackId,t.result);break;case"post":c()}},UT.Expression._reset=function(){i=[],n=[],e=null,o=!1},UT.Expression._postInstance=function(){return e=e}}(),function(){UT.Post=function(e){if(!e||!e.collections)throw Error("ArgumentError","Missing collections in state arguments");var t={},i=new UT.CollectionStore({data:e.collections,currentUserId:e.currentUserId,delegate:{save:function(e,t,i){UT.Expression._callAPI("collections.save",[e,t],i)},authenticate:function(){UT.Expression._callAPI("authenticate")}}}),n=function(e,t){"function"==typeof e&&(t=e,e={}),UT.Expression._callAPI("document.textInput",[e.value||null,e.max||null,e.multiline||!1],t)},o=function(e,t){e&&e.size&&e.size.auto&&window.console&&console.warn&&console.warn("Use of size.auto is deprecated, use size.autoCrop instead"),UT.Expression._callAPI("medias.openImageChooser",[e],function(e){var i=new UT.Image;i.init(e),t.call(this,i)})},r=function(e,t){UT.Expression._callAPI("medias.openSoundChooser",[e],function(e){var i=new UT.Sound(e);t.call(this,i)}),UT.Expression._callAPI("medias.openSoundChooser",[e],t)},s=function(e,t){UT.Expression._callAPI("medias.openVideoChooser",[e],function(e){var i=new UT.Video(e);t.call(this,i)})},a=function(e,t){e.image.descriptor&&(e.image=e.image.descriptor),UT.Expression._callAPI("medias.crop",[e],function(i){var n=null;e.image.init?(e.image.init(i),n=e.image):(n=new UT.Image,n.init(i)),t.call(this,n)})},c={text:n,image:o,sound:r,video:s,crop:a},l=this.trigger=function(e){var i,n,o,r,s,a=t[e],c=[],u="after"+e.charAt(0).toUpperCase()+e.slice(1);if(a){for(a=a.slice(0),i=a.length,n=-1,r=Array.prototype.slice.call(arguments,1);i>++n;)o=a[n],s=o.apply(classModule,r),s&&"function"==typeof s.then&&c.push(s);c.length>0?when.all(c).then(function(){l(u)}):l(u)}},u=this.bind=function(e,i){var n=t[e]||(t[e]=[]);"function"==typeof i&&n.push(i)};this.unbind=function(e,i){var n,o=t[e];if(o){if(!i)return delete t[e],void 0;for(n=o?o.indexOf(i):-1;-1!==n;)o.splice(n,1),n=o.indexOf(i)}},this.publish=function(e){u("publish",e)},this.valid=function(t){return void 0!==t&&t!=e.readyToPost&&(e.readyToPost=!!t,UT.Expression._callAPI("document.readyToPost",[e.readyToPost])),e.readyToPost},this.scollChanged=function(e){u("scrollChanged",e)},this.imageAdded=function(e){u("imageAdded",e)},this.dialog=function(e,t,i){if(void 0===i&&"function"==typeof t&&(i=t,t={}),!c[e])throw Error("InvalidArgument","unknown dialog type "+e);c[e](t,i)},this.storage=i.get("default"),this.getParentData=function(){return this.getState("parentData")||{}},this.pushNavigation=function(e,t){UT.Expression._callAPI("container.pushNavigation",[e],t)},this.popNavigation=function(){UT.Expression._callAPI("container.popNavigation")},this.navigate=function(e){var t={};arguments.length>=2?t=arguments[1]:1===arguments.length&&(t=e,e="browse");var i={app:e,parameters:t};UT.Expression._callAPI("container.navigate",[i])};var d=this.context={player:!1,editor:!1,thumbnail:!1};"edit"==e.mode?d.editor=!0:"player"==e.mode&&(d.player=!0),this.node=document.querySelector(".webdoc_expression_wrapper")}}(),UT.Image=function(){this.url="",this.info={},this.type="image",this.crop=function(e,t){UT.Expression._callAPI("medias.recrop",[{size:e,image:this.descriptor}],function(e){this.init(e),t.call(this,this)}.bind(this))},this.autocrop=function(e,t,i){UT.Expression._callAPI("medias.crop",[{size:{width:e,height:t,auto:!0},image:this.descriptor}],function(e){this.init(e),i.call(this,this)}.bind(this))},this.filter=function(e,t){UT.Expression._callAPI("medias.applyFilter",[{filter:e,image:this.descriptor}],function(e){this.init(e),t.call(this,this)}.bind(this))},this.editable=function(e){UT.Expression._callAPI("medias.getEditableImage",[this.url],function(t){this.url=t,e.call(this,this)}.bind(this))},this.toJSON=function(){return JSON.stringify(this.descriptor)},this.init=function(e){this.url=e.url,this.descriptor=e,this.info=e.info,e.center&&(this.info.crop=e.center)},this.descriptor={}},UT.Video=function(e){function t(e){this.url=e.url,i=e}this.url="",this.type="video";var i={};t.bind(this)(e)},UT.Sound=function(e){function t(e){i=e,this.service=e.service,this.url=e.url,this.title=e.title,this.artist=e.artist,this.cover=e.cover,this.artistCover=e.artistCover,this.soundCover=e.soundCover,this.waveFormImage=e.waveFormImage,this.link=e.link,this.appData=e.appData}this.service="",this.url="",this.title="",this.artist="",this.cover="",this.artistCover="",this.soundCover="",this.waveFormImage="",this.link="",this.appData={};var i={};t.bind(this)(e)},FastClick.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),FastClick.prototype.needsClick=function(e){"use strict";switch(e.nodeName.toLowerCase()){case"button":case"input":return this.deviceIsIOS&&"file"===e.type?!0:e.disabled;case"label":case"video":return!0;default:return/\bneedsclick\b/.test(e.className)}},FastClick.prototype.needsFocus=function(e){"use strict";switch(e.nodeName.toLowerCase()){case"textarea":case"select":return!0;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled;default:return/\bneedsfocus\b/.test(e.className)}},FastClick.prototype.sendClick=function(e,t){"use strict";var i,n;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),n=t.changedTouches[0],i=document.createEvent("MouseEvents"),i.initMouseEvent("click",!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,e.dispatchEvent(i)},FastClick.prototype.focus=function(e){"use strict";var t;this.deviceIsIOS&&e.setSelectionRange?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},FastClick.prototype.updateScrollParent=function(e){"use strict";var t,i;if(t=e.fastClickScrollParent,!t||!t.contains(e)){i=e;do{if(i.scrollHeight>i.offsetHeight){t=i,e.fastClickScrollParent=i;break}i=i.parentElement}while(i)}t&&(t.fastClickLastScrollTop=t.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(e){"use strict";return e.nodeType===Node.TEXT_NODE?e.parentNode:e},FastClick.prototype.onTouchStart=function(e){"use strict";var t,i,n;if(t=this.getTargetElementFromEventTarget(e.target),i=e.targetTouches[0],this.deviceIsIOS){if(n=window.getSelection(),n.rangeCount&&!n.isCollapsed)return!0;if(!this.deviceIsIOS4){if(i.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=i.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=i.pageX,this.touchStartY=i.pageY,200>e.timeStamp-this.lastClickTime&&e.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(e){"use strict";var t=e.targetTouches[0];return Math.abs(t.pageX-this.touchStartX)>10||Math.abs(t.pageY-this.touchStartY)>10?!0:!1},FastClick.prototype.onTouchMove=function(e){"use strict";return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},FastClick.prototype.findControl=function(e){"use strict";return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(e){"use strict";var t,i,n,o,r,s=this.targetElement;if(!this.trackingClick)return!0;if(200>e.timeStamp-this.lastClickTime)return this.cancelNextClick=!0,!0;if(this.lastClickTime=e.timeStamp,i=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(r=e.changedTouches[0],s=document.elementFromPoint(r.pageX-window.pageXOffset,r.pageY-window.pageYOffset)),n=s.tagName.toLowerCase(),"label"===n){if(t=this.findControl(s)){if(this.focus(s),this.deviceIsAndroid)return!1;s=t}}else if(this.needsFocus(s))return e.timeStamp-i>100||this.deviceIsIOS&&window.top!==window&&"input"===n?(this.targetElement=null,!1):(this.focus(s),this.deviceIsIOS4&&"select"===n||(this.targetElement=null,e.preventDefault()),!1);return this.deviceIsIOS&&!this.deviceIsIOS4&&(o=s.fastClickScrollParent,o&&o.fastClickLastScrollTop!==o.scrollTop)?!0:(this.needsClick(s)||(e.preventDefault(),this.sendClick(s,e)),!1)},FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onClick=function(e){"use strict";var t;return this.targetElement?e.forwardedTouchEvent?!0:(t=this.targetElement,this.targetElement=null,this.trackingClick?(this.trackingClick=!1,!0):e.cancelable?"submit"===e.target.type&&0===e.detail?!0:!this.needsClick(t)||this.cancelNextClick?(this.cancelNextClick=!1,e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0):!0},FastClick.prototype.destroy=function(){"use strict";var e=this.layer;e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},"undefined"!=typeof define&&define.amd&&define(function(){"use strict";return FastClick}),"undefined"!=typeof module&&module.exports&&(module.exports=function(e){"use strict";return new FastClick(e)},module.exports.FastClick=FastClick),("ontouchstart"in window||"onmsgesturechange"in window)&&(document.querySelector("html").className=document.querySelector("html").className+" touch",FastClick!==void 0&&window.addEventListener("load",function(){new FastClick(document.body)},!1)),window.addEventListener("message",function(e){try{msgObj=JSON.parse(e.data)}catch(t){console&&console.error&&console.error("receive invalid message",e.data,t.message),msgObj={}}UT.Expression._dispatch(msgObj)},!1),UT.Expression.extendExpression("collections",function(e){var t=e.getState("documentId"),i=e.getState("collections"),n=e.getState("currentUserId");if(t&&i){var o=new UT.CollectionStore({data:i,currentUserId:n,delegate:{save:function(e,t,i){UT.Expression._callAPI("collections.save",[e,t],i)},authenticate:function(){UT.Expression._callAPI("authenticate")}}});return e.storage=o.get("default"),o}});