<form class="form">
  <div>
    Give your own score:
    <input type="radio" value="1" class="star" name="star"/>
    <input type="radio" value="2" class="star" name="star"/>
    <input type="radio" value="3" class="star" name="star"/>
    <input type="radio" value="4" class="star" name="star"/>
    <input type="radio" value="5" class="star" name="star"/>
  </div>
  <div><textarea rows="5" cols="40" class="comment"></textarea></div>
  <div class="score">score: <span class="score-value"></span></div>
</form>

<script>
UT.Expression.ready(function(post){
  var stars = post.node.querySelectorAll('.star');
  var votes = post.collection('votes');
  var comment = ""
  post.resize({height: post.node.querySelector('form').offsetHeight});
  displayScore();
  var myVote = {};
  for (var i = stars.length - 1; i >= 0; i--) {
    stars[i].onclick = function(event){
      var score = parseInt(event.target.value, 10);
      myVote.note = score;
      votes.setUserItem(myVote);
      post.save();
      displayScore();
      console.log("New score is " + score + " and the new average is " + votes.average('note'));
    }
  };
  function displayScore(){
    post.node.querySelector('.score-value').innerHTML = votes.average('note');
  }
});
</script>